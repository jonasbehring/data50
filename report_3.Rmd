```{r include=FALSE}
library(dplyr)
library(DBI)
library(purrr)

politicians_db <- dbConnect(RSQLite::SQLite(), "zh_politicians.db")

addresses_tbl <- tbl(politicians_db, "Addresses")
affilations_tbl <- tbl(politicians_db, "Affiliations")
mandates_tbl <- tbl(politicians_db, "Mandates")
persons_tbl <- tbl(politicians_db, "Persons")
```

# Report 3
## Exercises
### Part 1
#### How many survey participants were there?
```{r}
library(lubridate)
library(janitor)

mandates <-
mandates_tbl%>%
  collect

mandates_with_dates <-
mandates %>%
  filter(MANDATE_START_DAY > 0) %>%
  mutate(startdate = make_date(MANDATE_START_YEAR, MANDATE_START_MONTH, MANDATE_START_DAY),
         enddate = case_when(
         MANDATE_END_YEAR==0 ~ Sys.Date(),
         TRUE ~ make_date(MANDATE_END_YEAR, MANDATE_END_MONTH, MANDATE_END_DAY))) %>%
    arrange(desc(enddate))

head(mandates_filtered)
  


```


{r include=FALSE}
dbDisconnect(politicians_db)
```
